--// Hello Kitty Orion Style UI Library
--// Usage: local ui = loadstring(game:HttpGet("RAW_URL"))()

local Library = {}
Library.__index = Library

-- SERVICES
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer

-- THEME
local COLORS = {
	Main = Color3.fromRGB(255,182,193),
	Accent = Color3.fromRGB(255,105,180),
	Text = Color3.fromRGB(90,90,90),
	White = Color3.fromRGB(255,255,255)
}

-- BLUR
local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = Lighting

-- SCREEN GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "HelloKittyUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- DRAG FUNCTION
local function MakeDraggable(frame)
	local dragging, dragInput, startPos, startFrame
	frame.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			startPos = i.Position
			startFrame = frame.Position
		end
	end)
	frame.InputChanged:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = i
		end
	end)
	UserInputService.InputChanged:Connect(function(i)
		if dragging and i == dragInput then
			local delta = i.Position - startPos
			frame.Position = UDim2.new(
				startFrame.X.Scale,
				startFrame.X.Offset + delta.X,
				startFrame.Y.Scale,
				startFrame.Y.Offset + delta.Y
			)
		end
	end)
	UserInputService.InputEnded:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
end

-- WINDOW
function Library:MakeWindow(info)
	local Window = {}

	-- MAIN
	local Main = Instance.new("Frame", ScreenGui)
	Main.AnchorPoint = Vector2.new(0.5,0.5)
	Main.Position = UDim2.fromScale(0.5,0.5)
	Main.Size = UDim2.fromScale(0,0)
	Main.BackgroundColor3 = COLORS.Main
	Main.BackgroundTransparency = 1
	Main.BorderSizePixel = 0
	Instance.new("UICorner", Main).CornerRadius = UDim.new(0,22)

	MakeDraggable(Main)

	-- TITLE
	local Title = Instance.new("TextLabel", Main)
	Title.Size = UDim2.new(1,0,0,42)
	Title.BackgroundColor3 = COLORS.Accent
	Title.Text = info.Name or "Hello Kitty UI"
	Title.Font = Enum.Font.GothamBold
	Title.TextSize = 16
	Title.TextColor3 = COLORS.White
	Title.BorderSizePixel = 0
	Instance.new("UICorner", Title).CornerRadius = UDim.new(0,22)

	-- TAB HOLDER
	local TabHolder = Instance.new("Frame", Main)
	TabHolder.Position = UDim2.fromOffset(10,52)
	TabHolder.Size = UDim2.fromOffset(140,300)
	TabHolder.BackgroundTransparency = 1
	local TabLayout = Instance.new("UIListLayout", TabHolder)
	TabLayout.Padding = UDim.new(0,6)

	-- PAGE HOLDER
	local PageHolder = Instance.new("Frame", Main)
	PageHolder.Position = UDim2.fromOffset(160,52)
	PageHolder.Size = UDim2.fromOffset(360,300)
	PageHolder.BackgroundTransparency = 1

	-- OPEN ANIMATION
	task.spawn(function()
		TweenService:Create(Main, TweenInfo.new(0.45, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
			Size = UDim2.fromOffset(540,380),
			BackgroundTransparency = 0.25
		}):Play()

		TweenService:Create(Blur, TweenInfo.new(0.45), {Size = 18}):Play()
	end)

	-- TAB
	function Window:MakeTab(info)
		local Tab = {}

		local Button = Instance.new("TextButton", TabHolder)
		Button.Size = UDim2.new(1,0,0,36)
		Button.Text = info.Name
		Button.Font = Enum.Font.Gotham
		Button.TextSize = 14
		Button.TextColor3 = COLORS.White
		Button.BackgroundColor3 = COLORS.Accent
		Button.BorderSizePixel = 0
		Instance.new("UICorner", Button).CornerRadius = UDim.new(0,16)

		local Page = Instance.new("Frame", PageHolder)
		Page.Size = UDim2.new(1,0,1,0)
		Page.Visible = false
		Page.BackgroundTransparency = 1
		local Layout = Instance.new("UIListLayout", Page)
		Layout.Padding = UDim.new(0,10)

		Button.MouseButton1Click:Connect(function()
			for _,v in pairs(PageHolder:GetChildren()) do
				if v:IsA("Frame") then v.Visible = false end
			end
			Page.Visible = true
		end)

		-- TOGGLE (SQUARE + NHÁY MÀU)
		function Tab:AddToggle(info)
			local Frame = Instance.new("Frame", Page)
			Frame.Size = UDim2.new(1,-20,0,44)
			Frame.BackgroundColor3 = COLORS.White
			Frame.BackgroundTransparency = 0.35
			Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,18)

			local Label = Instance.new("TextLabel", Frame)
			Label.Text = info.Name
			Label.Font = Enum.Font.Gotham
			Label.TextSize = 14
			Label.TextColor3 = COLORS.Accent
			Label.BackgroundTransparency = 1
			Label.Size = UDim2.new(0.7,0,1,0)

			local Box = Instance.new("TextButton", Frame)
			Box.Size = UDim2.new(0,28,0,28)
			Box.Position = UDim2.new(1,-40,0.5,-14)
			Box.BackgroundColor3 = COLORS.White
			Box.BorderSizePixel = 0
			Instance.new("UICorner", Box).CornerRadius = UDim.new(0,6)

			task.spawn(function()
				while true do
					Box.BackgroundColor3 = Color3.fromRGB(255,182,193)
					task.wait(0.35)
					Box.BackgroundColor3 = Color3.fromRGB(255,255,255)
					task.wait(0.35)
				end
			end)

			Box.MouseButton1Click:Connect(function()
				if info.Callback then
					info.Callback(true)
				end
			end)
		end

		-- SLIDER
		function Tab:AddSlider(info)
			local Holder = Instance.new("Frame", Page)
			Holder.Size = UDim2.new(1,-20,0,50)
			Holder.BackgroundTransparency = 1

			local Label = Instance.new("TextLabel", Holder)
			Label.Text = info.Name..": "..info.Default
			Label.Font = Enum.Font.Gotham
			Label.TextSize = 14
			Label.TextColor3 = COLORS.Accent
			Label.BackgroundTransparency = 1
			Label.Size = UDim2.new(1,0,0.4,0)

			local Bar = Instance.new("Frame", Holder)
			Bar.Position = UDim2.new(0,0,0.6,0)
			Bar.Size = UDim2.new(1,0,0.3,0)
			Bar.BackgroundColor3 = COLORS.White
			Instance.new("UICorner", Bar).CornerRadius = UDim.new(1,0)

			local Fill = Instance.new("Frame", Bar)
			Fill.Size = UDim2.new((info.Default-info.Min)/(info.Max-info.Min),0,1,0)
			Fill.BackgroundColor3 = COLORS.Accent
			Instance.new("UICorner", Fill).CornerRadius = UDim.new(1,0)

			Bar.InputBegan:Connect(function(i)
				if i.UserInputType == Enum.UserInputType.MouseButton1 then
					local percent = math.clamp((i.Position.X-Bar.AbsolutePosition.X)/Bar.AbsoluteSize.X,0,1)
					local value = math.floor(info.Min+(info.Max-info.Min)*percent)
					Fill.Size = UDim2.new(percent,0,1,0)
					Label.Text = info.Name..": "..value
					if info.Callback then info.Callback(value) end
				end
			end)
		end

		-- DROPDOWN
		function Tab:AddDropdown(info)
			local Btn = Instance.new("TextButton", Page)
			Btn.Size = UDim2.new(1,-20,0,42)
			Btn.Text = info.Name
			Btn.Font = Enum.Font.Gotham
			Btn.TextSize = 14
			Btn.TextColor3 = COLORS.Accent
			Btn.BackgroundColor3 = COLORS.White
			Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,18)

			Btn.MouseButton1Click:Connect(function()
				if info.Callback then
					info.Callback(info.Options[1])
				end
			end)
		end

		return Tab
	end

	return Window
end

return Library
