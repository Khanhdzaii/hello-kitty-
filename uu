--// Hello Kitty Orion Style UI Library (FINAL)
--// Usage: local ui = loadstring(game:HttpGet("RAW_URL"))()

local Library = {}
Library.__index = Library

-- SERVICES
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local LP = Players.LocalPlayer

-- THEME (glass – trong suốt tối đa)
local COLORS = {
	Main = Color3.fromRGB(255, 190, 210),
	Accent = Color3.fromRGB(255, 120, 180),
	Text = Color3.fromRGB(255,255,255)
}

-- BLUR
local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = Lighting

-- SCREEN GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "HelloKittyUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LP:WaitForChild("PlayerGui")

-- DRAG
local function Drag(frame)
	local dragging, dragInput, startPos, startFrame
	frame.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			startPos = i.Position
			startFrame = frame.Position
		end
	end)
	frame.InputChanged:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = i
		end
	end)
	UIS.InputChanged:Connect(function(i)
		if dragging and i == dragInput then
			local delta = i.Position - startPos
			frame.Position = UDim2.new(
				startFrame.X.Scale,
				startFrame.X.Offset + delta.X,
				startFrame.Y.Scale,
				startFrame.Y.Offset + delta.Y
			)
		end
	end)
	UIS.InputEnded:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
end

-- WINDOW
function Library:MakeWindow(info)
	local Window = {}
	local UI_OPEN = true

	-- MAIN
	local Main = Instance.new("Frame", ScreenGui)
	Main.AnchorPoint = Vector2.new(0.5,0.5)
	Main.Position = UDim2.fromScale(0.5,0.5)
	Main.Size = UDim2.fromScale(0,0)
	Main.BackgroundColor3 = COLORS.Main
	Main.BackgroundTransparency = 0.65
	Main.BorderSizePixel = 0

	local Corner = Instance.new("UICorner", Main)
	Corner.CornerRadius = UDim.new(1,0) -- tròn lúc đầu

	Drag(Main)

	-- TITLE
	local Title = Instance.new("TextLabel", Main)
	Title.Size = UDim2.new(1,0,0,40)
	Title.BackgroundTransparency = 1
	Title.Text = info.Name or "Hello Kitty UI"
	Title.Font = Enum.Font.GothamBold
	Title.TextSize = 15
	Title.TextColor3 = COLORS.Text

	-- MINIMIZE BUTTON (+ / -)
	local MinBtn = Instance.new("TextButton", Title)
	MinBtn.Size = UDim2.fromOffset(28,28)
	MinBtn.Position = UDim2.new(1,-34,0.5,-14)
	MinBtn.Text = "-"
	MinBtn.Font = Enum.Font.GothamBold
	MinBtn.TextSize = 18
	MinBtn.TextColor3 = COLORS.Text
	MinBtn.BackgroundColor3 = COLORS.Accent
	MinBtn.BackgroundTransparency = 0.3
	MinBtn.BorderSizePixel = 0
	Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(1,0)

	-- TAB HOLDER
	local TabHolder = Instance.new("Frame", Main)
	TabHolder.Position = UDim2.fromOffset(10,50)
	TabHolder.Size = UDim2.fromOffset(130,290)
	TabHolder.BackgroundTransparency = 1
	local TabLayout = Instance.new("UIListLayout", TabHolder)
	TabLayout.Padding = UDim.new(0,6)

	-- PAGE HOLDER
	local PageHolder = Instance.new("Frame", Main)
	PageHolder.Position = UDim2.fromOffset(150,50)
	PageHolder.Size = UDim2.fromOffset(360,290)
	PageHolder.BackgroundTransparency = 1

	-- OPEN ANIMATION (TRÒN → VUÔNG)
	task.spawn(function()
		TweenService:Create(Main, TweenInfo.new(0.45, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
			Size = UDim2.fromOffset(530,360),
			BackgroundTransparency = 0.6
		}):Play()

		TweenService:Create(Corner, TweenInfo.new(0.45), {
			CornerRadius = UDim.new(0,22)
		}):Play()

		TweenService:Create(Blur, TweenInfo.new(0.45), {
			Size = 20
		}):Play()
	end)

	-- MINIMIZE / RESTORE
	local function CloseUI()
		UI_OPEN = false
		MinBtn.Text = "+"
		TweenService:Create(Main, TweenInfo.new(0.35), {
			Size = UDim2.fromScale(0,0),
			BackgroundTransparency = 1
		}):Play()
		TweenService:Create(Corner, TweenInfo.new(0.35), {
			CornerRadius = UDim.new(1,0)
		}):Play()
		TweenService:Create(Blur, TweenInfo.new(0.35), {Size = 0}):Play()
	end

	local function OpenUI()
		UI_OPEN = true
		MinBtn.Text = "-"
		TweenService:Create(Main, TweenInfo.new(0.4), {
			Size = UDim2.fromOffset(530,360),
			BackgroundTransparency = 0.6
		}):Play()
		TweenService:Create(Corner, TweenInfo.new(0.4), {
			CornerRadius = UDim.new(0,22)
		}):Play()
		TweenService:Create(Blur, TweenInfo.new(0.4), {Size = 20}):Play()
	end

	MinBtn.MouseButton1Click:Connect(function()
		if UI_OPEN then
			CloseUI()
		else
			OpenUI()
		end
	end)

	-- TAB
	function Window:MakeTab(info)
		local Tab = {}

		local Btn = Instance.new("TextButton", TabHolder)
		Btn.Size = UDim2.new(1,0,0,34)
		Btn.Text = info.Name
		Btn.Font = Enum.Font.Gotham
		Btn.TextSize = 14
		Btn.TextColor3 = COLORS.Text
		Btn.BackgroundColor3 = COLORS.Accent
		Btn.BackgroundTransparency = 0.35
		Btn.BorderSizePixel = 0
		Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,14)

		local Page = Instance.new("Frame", PageHolder)
		Page.Size = UDim2.new(1,0,1,0)
		Page.Visible = false
		Page.BackgroundTransparency = 1
		local Layout = Instance.new("UIListLayout", Page)
		Layout.Padding = UDim.new(0,8)

		Btn.MouseButton1Click:Connect(function()
			for _,v in pairs(PageHolder:GetChildren()) do
				if v:IsA("Frame") then v.Visible = false end
			end
			Page.Visible = true
		end)

		-- TOGGLE (vuông – nháy màu liên tục)
		function Tab:AddToggle(info)
			local Holder = Instance.new("Frame", Page)
			Holder.Size = UDim2.new(1,-20,0,42)
			Holder.BackgroundColor3 = Color3.fromRGB(255,255,255)
			Holder.BackgroundTransparency = 0.8
			Instance.new("UICorner", Holder).CornerRadius = UDim.new(0,16)

			local Text = Instance.new("TextLabel", Holder)
			Text.Text = info.Name
			Text.Font = Enum.Font.Gotham
			Text.TextSize = 14
			Text.TextColor3 = COLORS.Text
			Text.BackgroundTransparency = 1
			Text.Size = UDim2.new(0.7,0,1,0)

			local Box = Instance.new("Frame", Holder)
			Box.Size = UDim2.fromOffset(26,26)
			Box.Position = UDim2.new(1,-36,0.5,-13)
			Instance.new("UICorner", Box).CornerRadius = UDim.new(0,6)

			task.spawn(function()
				while true do
					Box.BackgroundColor3 = Color3.fromRGB(255,180,210)
					task.wait(0.35)
					Box.BackgroundColor3 = Color3.fromRGB(255,255,255)
					task.wait(0.35)
				end
			end)
		end

		-- SLIDER
		function Tab:AddSlider(info)
			local Holder = Instance.new("Frame", Page)
			Holder.Size = UDim2.new(1,-20,0,46)
			Holder.BackgroundTransparency = 1

			local Label = Instance.new("TextLabel", Holder)
			Label.Text = info.Name .. ": " .. info.Default
			Label.Font = Enum.Font.Gotham
			Label.TextSize = 13
			Label.TextColor3 = COLORS.Text
			Label.BackgroundTransparency = 1
			Label.Size = UDim2.new(1,0,0.4,0)

			local Bar = Instance.new("Frame", Holder)
			Bar.Position = UDim2.new(0,0,0.6,0)
			Bar.Size = UDim2.new(1,0,0.3,0)
			Bar.BackgroundColor3 = Color3.fromRGB(255,255,255)
			Bar.BackgroundTransparency = 0.7
			Instance.new("UICorner", Bar).CornerRadius = UDim.new(1,0)

			local Fill = Instance.new("Frame", Bar)
			Fill.Size = UDim2.new((info.Default-info.Min)/(info.Max-info.Min),0,1,0)
			Fill.BackgroundColor3 = COLORS.Accent
			Instance.new("UICorner", Fill).CornerRadius = UDim.new(1,0)

			Bar.InputBegan:Connect(function(i)
				if i.UserInputType == Enum.UserInputType.MouseButton1 then
					local pct = math.clamp((i.Position.X-Bar.AbsolutePosition.X)/Bar.AbsoluteSize.X,0,1)
					local val = math.floor(info.Min+(info.Max-info.Min)*pct)
					Fill.Size = UDim2.new(pct,0,1,0)
					Label.Text = info.Name..": "..val
					if info.Callback then info.Callback(val) end
				end
			end)
		end

		-- DROPDOWN
		function Tab:AddDropdown(info)
			local Btn = Instance.new("TextButton", Page)
			Btn.Size = UDim2.new(1,-20,0,40)
			Btn.Text = info.Name
			Btn.Font = Enum.Font.Gotham
			Btn.TextSize = 14
			Btn.TextColor3 = COLORS.Text
			Btn.BackgroundColor3 = Color3.fromRGB(255,255,255)
			Btn.BackgroundTransparency = 0.75
			Btn.BorderSizePixel = 0
			Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,16)

			Btn.MouseButton1Click:Connect(function()
				if info.Callback then
					info.Callback(info.Options[1])
				end
			end)
		end

		return Tab
	end

	return Window
end

return Library
